{% extends "layout.html" %}
{% block head %}
    <title></title>
    <meta name="description" content="">
    <link rel="stylesheet" href="/static/css/main.css">
{% endblock %}
{% block body %}
<div class='container'>
  <h2>Currently available sublets</h2>
  <div id='listing-map'></div>
  <table cellpadding="0" cellspacing="0" border="0" id='available' class='table table-bordered table-striped'>
  <thead>
    <tr>  
      <th>
        Address
      </th>
      <th>
        Price
      </th>
      <th>
        Description
      </th>
      <th>
        Space type 
      </th>
      <th>
        Submitted on 
      </th>
    </tr>  
  </thead>
  {% for listing in listings %}
    <tr>  
      <td>
        {{listing.address}}
      </td>
      <td>
        {{listing.price|currency}}
      </td>
      <td>
        {{listing.description}}
      </td>
      <td>
        {{listing.space_type}}
      </td>
      <td>
        {{listing.created.date()}}
      </td>
    </tr>  
  {% endfor %}
  </table>
</div>
{% endblock %}
{% block scripts %}
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=geometry"></script>
  <script src="{{url_for('static', filename='js/main.js')}}"></script>
  <script src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
  <script src="/static/js/vendor/paging.js"></script>
  <script>
  $(document).ready(function(){
      $('#available').dataTable( {
        "sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
        "sPaginationType": "bootstrap"
      });
      draw_listing_map({{location_json}});
  });
  $.extend( $.fn.dataTableExt.oStdClasses, {
    "sWrapper": "dataTables_wrapper form-inline"
  } );
  </script>
    
{% endblock %}
